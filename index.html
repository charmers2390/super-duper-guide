<!DOCTYPE html>
<html lang="en">
<head>
Â Â <meta charset="UTF-8">
Â Â <meta name="viewport" content="width=device-width, initial-scale=1.0">
Â Â <title>LunaBotAI</title>
Â Â <style>
Â Â Â Â body { margin:0; font-family:Arial,sans-serif; background:#000; color:#fff; display:flex; flex-direction:column; height:100vh; }
Â Â Â Â header { background:#000; padding:14px; border-bottom:1px solid #333; text-align:center; font-weight:bold; }
Â Â Â Â #sidebar { position:fixed; left:-300px; top:0; width:280px; height:100%; background:#111; transition:left .3s; display:flex; flex-direction:column; }
Â Â Â Â #sidebar.open { left:0; }
Â Â Â Â #chatList { flex:1; overflow-y:auto; padding:10px; }
Â Â Â Â .chat-item { background:#222; margin:5px 0; padding:8px; border-radius:6px; cursor:pointer; }
Â Â Â Â #settings { border-top:1px solid #333; padding:10px; }
Â Â Â Â #chat { flex:1; overflow-y:auto; padding:12px; display:flex; flex-direction:column; }
Â Â Â Â .msg { max-width:75%; padding:10px; margin:6px 0; border-radius:10px; line-height:1.4; }
Â Â Â Â .user { background:#10a37f; align-self:flex-end; }
Â Â Â Â .bot { background:#333; align-self:flex-start; }
Â Â Â Â #inputBar { display:flex; padding:10px; border-top:1px solid #333; }
Â Â Â Â #inputBar input { flex:1; padding:10px; border-radius:20px; border:none; background:#222; color:#fff; }
Â Â Â Â #inputBar button { margin-left:8px; border:none; border-radius:50%; padding:10px; background:#10a37f; color:#fff; cursor:pointer; }
Â Â </style>
</head>
<body>
Â Â <header>
Â Â Â Â <span onclick="toggleSidebar()">â˜°</span> LunaBotAI
Â Â </header>
Â Â 
Â Â <div id="sidebar">
Â Â Â Â <div id="chatList"></div>
Â Â Â Â <div id="settings">
Â Â Â Â Â Â <h4>âš™ Settings</h4>
Â Â Â Â Â Â <label>Language:
Â Â Â Â Â Â Â Â <select id="lang" onchange="updateSettings()">
Â Â Â Â Â Â Â Â Â Â <option value="en">English</option>
Â Â Â Â Â Â Â Â Â Â <option value="es">EspaÃ±ol</option>
Â Â Â Â Â Â Â Â Â Â <option value="fr">FranÃ§ais</option>
Â Â Â Â Â Â Â Â </select>
Â Â Â Â Â Â </label><br><br>
Â Â Â Â Â Â <label>Model:
Â Â Â Â Â Â Â Â <select id="model" onchange="updateSettings()">
Â Â Â Â Â Â Â Â Â Â <option value="gpt-5">ChatGPT-5</option>
Â Â Â Â Â Â Â Â Â Â <option value="gpt-4o">ChatGPT-4o</option>
Â Â Â Â Â Â Â Â </select>
Â Â Â Â Â Â </label><br><br>
Â Â Â Â Â Â <button onclick="clearChats()">ðŸ—‘ Clear All Chats</button>
Â Â Â Â </div>
Â Â </div>
Â Â 
Â Â <div id="chat"></div>
Â Â 
Â Â <div id="inputBar">
Â Â Â Â <input id="userInput" type="text" placeholder="Ask anything..." />
Â Â Â Â <button onclick="sendMessage()">âž¤</button>
Â Â </div>
Â Â 
<script>
Â Â const chat = document.getElementById('chat');
Â Â const chatList = document.getElementById('chatList');
Â Â const userInput = document.getElementById('userInput');
Â Â let chats = JSON.parse(localStorage.getItem('lunabot_chats')||'[]');
Â Â let currentChat = null;
Â Â let settings = JSON.parse(localStorage.getItem('lunabot_settings')||'{"lang":"en","model":"gpt-5"}');

Â Â function toggleSidebar(){ document.getElementById('sidebar').classList.toggle('open'); renderChats(); }
Â Â function newChat(){ currentChat={id:Date.now(),title:"New Chat",messages:[]}; chats.unshift(currentChat); saveChats(); renderChats(); chat.innerHTML=""; }
Â Â function renderChats(){ chatList.innerHTML=""; chats.forEach(c=>{ let div=document.createElement('div'); div.className="chat-item"; div.textContent=c.title; div.onclick=()=>loadChat(c.id); chatList.appendChild(div); }); }
Â Â function loadChat(id){ currentChat=chats.find(c=>c.id===id); chat.innerHTML=""; currentChat.messages.forEach(m=>appendMessage(m.text,m.cls)); toggleSidebar(); }
Â Â function saveChats(){ localStorage.setItem('lunabot_chats',JSON.stringify(chats)); }
Â Â function clearChats(){ chats=[]; saveChats(); renderChats(); chat.innerHTML=""; }
Â Â function updateSettings(){ settings={lang:document.getElementById('lang').value, model:document.getElementById('model').value}; localStorage.setItem('lunabot_settings',JSON.stringify(settings)); }

Â Â function appendMessage(text,cls){ let div=document.createElement('div'); div.className='msg '+cls; div.textContent=text; chat.appendChild(div); chat.scrollTop=chat.scrollHeight; return div; }

Â Â async function sendMessage(){
Â Â Â Â const text=userInput.value.trim(); if(!text)return;
Â Â Â Â if(!currentChat)newChat();
Â Â Â Â appendMessage(text,'user'); currentChat.messages.push({text,cls:'user'}); if(currentChat.title==="New Chat")currentChat.title=text.slice(0,30);
Â Â Â Â saveChats(); userInput.value="";
Â Â Â Â let botMsg=appendMessage("","bot"); currentChat.messages.push({text:"",cls:'bot'}); saveChats();

Â Â Â Â try{
Â Â Â Â Â Â const response=await fetch("http://localhost:3000/chat",{ // change to your deployed URL
Â Â Â Â Â Â Â Â method:"POST",
Â Â Â Â Â Â Â Â headers:{"Content-Type":"application/json"},
Â Â Â Â Â Â Â Â body:JSON.stringify({message:text,lang:settings.lang,model:settings.model,history:currentChat.messages.map(m=>({role:m.cls==="user"?"user":"assistant",content:m.text}))})
Â Â Â Â Â Â });

Â Â Â Â Â Â if(!response.body){ botMsg.textContent="(No response stream)"; return; }
Â Â Â Â Â Â const reader=response.body.getReader(); const decoder=new TextDecoder();
Â Â Â Â Â Â let done=false;
Â Â Â Â Â Â while(!done){
Â Â Â Â Â Â Â Â const {value,done:streamDone}=await reader.read();
Â Â Â Â Â Â Â Â if(value){
Â Â Â Â Â Â Â Â Â Â let chunk=decoder.decode(value);
Â Â Â Â Â Â Â Â Â Â botMsg.textContent+=chunk;
Â Â Â Â Â Â Â Â Â Â currentChat.messages[currentChat.messages.length-1].text=botMsg.textContent;
Â Â Â Â Â Â Â Â Â Â saveChats();
Â Â Â Â Â Â Â Â Â Â chat.scrollTop=chat.scrollHeight;
Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â done=streamDone;
Â Â Â Â Â Â }
Â Â Â Â }catch(err){ botMsg.textContent="Error: "+err.message; }
Â Â }

Â Â document.getElementById('lang').value=settings.lang;
Â Â document.getElementById('model').value=settings.model;
Â Â renderChats();
</script>
</body>
</html>
